{"version":3,"sources":["components/Item/item-title.module.scss","utils/api.ts","components/Item/item-details.module.scss","components/Item/item-title.tsx","components/Item/item-details.tsx","components/Item/item.tsx","components/Item/index.ts","redux/Items/actions.ts","redux/Items/selectors.ts","redux/Items/index.ts","components/Comment/comment.module.scss","redux/Comments/actions.ts","redux/Comments/selectors.ts","redux/Comments/index.ts","components/CommentWriter/comment-writer.tsx","components/Comment/comment.tsx","components/CommentList/comment-list.tsx","pages/Comments/comments-page.tsx","pages/Comments/index.ts"],"names":["module","exports","voter","domain","link","HTTP","axios","create","CRUDApi","EntityAPI","_ref","url","Object","_home_frank_Documents_Projects_workjam_hn_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","endpoints","entity","name","createDefaultEndpoints","assign","setOtherEndpoints","resourceUrl","concat","getAll","params","arguments","length","undefined","get","getOne","id","entityToCreate","post","update","entityToUpdate","put","delete","entityName","_this","TOP_STORIES","GET_ALL","getResourceUrl","NEWS_STORIES","NEW_STORIES","SHOW_STORIES","JOB_STORIES","ASK_STORIES","details","getDomain","URL","hostname","replace","ItemTitle","props","item","index","react","align","href","className","styles","target","title","Link","to","ItemDetails","setCurrentItem","colSpan","score","by","onClick","format","time","Date","toString","descendants","Item","item_title_ItemTitle","item_details_ItemDetails","spacer","__webpack_require__","d","__webpack_exports__","item_Item","createEntity","getAllStoriesByType","type","page","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","getState","store","pageSize","result","items","itemPromises","wrap","_context","prev","next","toUpperCase","sent","data","filter","deleted","dead","slice","map","abrupt","actionTypes","payload","Promise","all","stop","_x","_x2","apply","setPage","SET_PAGE","currentItemPromise","itemsById","resolve","SET_CURRENT_ITEM","currentItemSelector","state","currentItem","pageSelector","itemsSelector","createSelector","values","isLoadingSelector","isLoading","Items","actions","selectors","root","comment","valign","getAllById","ids","_callee2","kids","getAllKids","_getAllKids","_context2","children","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","kid","commentPromises","newKids","Symbol","iterator","done","value","isEmpty_default","t0","every","child","t1","return","finish","commentsSelector","comments","commentsById","flatMap","Comments","CommentWriter","onGoTo","rows","cols","Comment","height","width","dangerouslySetInnerHTML","__html","text","CommentList","key","comment_Comment","handleGoTo","e","preventDefault","stopPropagation","window","location","enhancedCommentsPage","connect","React","currentUrl","URLSearchParams","search","Number","SiteWrapper","comment_writer_CommentWriter","comment_list_CommentList"],"mappings":"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","file":"static/js/3.d4ecd525.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"voter\":\"item-title_voter__qViTL\",\"domain\":\"item-title_domain__16bfZ\",\"link\":\"item-title_link__1laQf\"};","import axios from 'axios';\n\nexport const HTTP = axios.create();\n\ninterface IDefaultEndpoints {\n  [key: string]: (...args: any[]) => Promise<any>;\n}\n\ninterface IEndpoints {\n  [key: string]: IDefaultEndpoints;\n}\n\ninterface IEntity {\n  name: string;\n}\n\ninterface IConstructor {\n  url: string;\n}\n\nclass EntityAPI {\n  private readonly url: string;\n  public endpoints: IEndpoints;\n  constructor({ url }: IConstructor) {\n    this.url = url;\n    this.endpoints = {};\n  }\n\n  public createEntity(entity: IEntity) {\n    this.endpoints[entity.name] = this.createDefaultEndpoints(entity);\n    Object.assign(this.endpoints, this.setOtherEndpoints());\n  }\n\n  private createDefaultEndpoints(entity: IEntity) {\n    const endpoints: IDefaultEndpoints = {};\n    const resourceUrl = `${this.url}/${entity.name}`;\n\n    endpoints.getAll = (params: any = {}) => HTTP.get(resourceUrl, { params });\n\n    endpoints.getOne = (id: string, params?: any) =>\n      HTTP.get(`${resourceUrl}/${id}.json`, { params });\n\n    endpoints.create = (entityToCreate: any) =>\n      HTTP.post(resourceUrl, entityToCreate);\n\n    endpoints.update = (id: string, entityToUpdate: any) =>\n      HTTP.put(`${resourceUrl}/${id}`, entityToUpdate);\n\n    endpoints.delete = (id: string) => HTTP.delete(`${resourceUrl}/${id}`);\n\n    return endpoints;\n  }\n\n  private getResourceUrl(entityName: string): string {\n    return `${this.url}/${entityName}`;\n  }\n\n  // TODO: Rewrite this to be.. well... better\n  private setOtherEndpoints() {\n    return {\n      TOP_STORIES: {\n        GET_ALL: () => HTTP.get(`${this.getResourceUrl('topstories.json')}`),\n      },\n      NEWS_STORIES: {\n        GET_ALL: () => HTTP.get(`${this.getResourceUrl('beststories.json')}`),\n      },\n      NEW_STORIES: {\n        GET_ALL: () => HTTP.get(`${this.getResourceUrl('newstories.json')}`),\n      },\n      SHOW_STORIES: {\n        GET_ALL: () => HTTP.get(`${this.getResourceUrl('showstories.json')}`),\n      },\n      JOB_STORIES: {\n        GET_ALL: () => HTTP.get(`${this.getResourceUrl('jobstories.json')}`),\n      },\n      ASK_STORIES: {\n        GET_ALL: () => HTTP.get(`${this.getResourceUrl('askstories.json')}`),\n      }\n    };\n  }\n}\n\nexport const CRUDApi = new EntityAPI({ url: 'https://hacker-news.firebaseio.com/v0' });\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"item-details_details__2ZwlC\"};","import * as React from 'react';\nimport { IItem } from '../../redux/Items/types';\nimport styles from './item-title.module.scss';\nimport { Link } from 'react-router-dom';\n\ninterface IProps {\n  index?: number;\n  item: IItem;\n}\n\nfunction getDomain(url: string | undefined): string {\n  if (!url) {\n    return '';\n  }\n  return new URL(url).hostname.replace('www.', '');\n}\n\nconst ItemTitle: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { item, index } = props;\n  return (\n    <tr>\n      {\n        <td align={'right'}>\n          <span>{index && `${index}.`}</span>\n        </td>\n      }\n      <td>\n        <a href={`https://news.ycombinator.com/vote?id=${item.id}&how=up`}>\n          <div className={styles.voter} />\n        </a>\n      </td>\n      <td>\n        {item.url ? (\n          <a target={'_blank'} href={item.url}>\n            {item.title}\n          </a>\n        ) : (\n          <Link to={`/item?id=${item.id}`}>{item.title}</Link>\n        )}{' '}\n        <span className={styles.domain}>\n          {item.url && (\n            <>\n              {'('}\n              <a\n                className={styles.link}\n                href={`https://news.ycombinator.com/from?site=${getDomain(\n                  item.url\n                )}`}\n              >\n                {getDomain(item.url)}\n              </a>\n              {')'}\n            </>\n          )}\n        </span>\n      </td>\n    </tr>\n  );\n};\n\nexport { ItemTitle };\n","import * as React from 'react';\nimport { IItem } from '../../redux/Items/types';\nimport { format } from 'timeago.js';\nimport styles from './item-details.module.scss';\nimport { Link } from 'react-router-dom';\n\ninterface IProps {\n  item: IItem;\n  index?: number;\n  setCurrentItem: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n}\n\nconst ItemDetails: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { item, setCurrentItem, index } = props;\n  const spacer = ' | ';\n  return (\n    <tr>\n      <td colSpan={2} />\n      <td className={styles.details}>\n        <span>{item.score} points</span>\n        {' by '}\n        <a href={`https://news.ycombinator.com/user?id=${item.by}`}>\n          {item.by}\n        </a>{' '}\n        <span>\n          <Link onClick={setCurrentItem} to={`/item?id=${item.id}`}>\n            {format(item.time, new Date().toString())}\n          </Link>\n        </span>\n        {spacer}\n        <a href={`https://news.ycombinator.com/hide?id=${item.id}`}>hide</a>\n        {spacer}\n        {!index && (\n          <>\n            <a href={`https://hn.algolia.com/?query=${item.title}&sort=byDate&dateRange=all&type=story&storyText=false&prefix&page=0`}>past</a>\n            {spacer}\n            <a href={`https://hn.algolia.com/?search=${item.title}`}>web</a>\n            {spacer}\n            <a href={`https://news.ycombinator.com/fave?id=${item.id}`}>\n              favorite\n            </a>\n            {spacer}\n          </>\n        )}\n        <Link onClick={setCurrentItem} to={`/item?id=${item.id}`}>\n          {item.descendants} comments\n        </Link>\n      </td>\n    </tr>\n  );\n};\n\nexport { ItemDetails };\n","import * as React from 'react';\nimport { IItem } from '../../redux/Items/types';\nimport styles from './item-title.module.scss';\nimport { ItemTitle } from './item-title';\nimport { ItemDetails } from './item-details';\n\ninterface IProps {\n  item: IItem;\n  index?: number;\n  setCurrentItem: (e: React.MouseEvent<HTMLAnchorElement>) => void;\n}\n\nconst Item: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { index, item, setCurrentItem } = props;\n  return (\n    <>\n      <ItemTitle item={item} index={index} />\n      <ItemDetails setCurrentItem={setCurrentItem} item={item} index={index} />\n      <tr className={styles.spacer} />\n    </>\n  );\n};\n\nexport { Item };\n","export { Item } from './item';\n","import { actionTypes } from './action-types';\nimport { AnyAction, Dispatch } from 'redux';\nimport { CRUDApi } from '../../utils/api';\nimport { AxiosResponse } from 'axios';\nimport { IState } from '../types';\nimport { IItem } from './types';\n\nCRUDApi.createEntity({ name: 'item' });\n\nexport const getAllStoriesByType = (type: string, page: number = 1) => async (\n  dispatch: Dispatch,\n  getState: Function\n) => {\n  const store: IState = getState();\n  const pageSize = store.items.pageSize;\n  const result: AxiosResponse = await CRUDApi.endpoints[\n    `${type.toUpperCase()}_STORIES`\n  ].GET_ALL();\n  const items = result.data\n    .filter((item: IItem) => !item.deleted && !item.dead)\n    .slice(page * pageSize - pageSize, page * pageSize);\n  const itemPromises = items.map((item: number) =>\n    CRUDApi.endpoints.item.getOne(item)\n  );\n\n  return dispatch({\n    type: actionTypes.GET_ALL,\n    payload: Promise.all(itemPromises),\n  });\n};\n\nexport const setPage = (page: number) => {\n  return {\n    type: actionTypes.SET_PAGE,\n    payload: { page },\n  };\n};\n\nexport const setCurrentItem = (id: number | null) => (\n  dispatch: Dispatch,\n  getState: Function\n) => {\n  const store = getState();\n  const itemsById = store.items.itemsById;\n  let currentItemPromise;\n\n  if (!id) {\n    currentItemPromise = new Promise((resolve) => resolve({ data: null }));\n  } else if (!itemsById[id]) {\n    currentItemPromise = CRUDApi.endpoints.item.getOne(id);\n  } else {\n    currentItemPromise = new Promise((resolve) =>\n      resolve({ data: itemsById[id] })\n    );\n  }\n\n  return dispatch({\n    type: actionTypes.SET_CURRENT_ITEM,\n    payload: currentItemPromise,\n  });\n};\n","import { createSelector } from 'reselect';\nimport { IState } from '../types';\n\nconst itemsStoreSelector = (state: IState) => state.items;\nconst itemsByIdSelector = (state: IState) => state.items.itemsById;\nexport const currentItemSelector = (state: IState) => state.items.currentItem;\nexport const pageSelector = (state: IState) => state.items.page;\n\nexport const itemsSelector = createSelector(\n  [itemsByIdSelector],\n  (itemsById) => {\n    return Object.values(itemsById);\n  }\n);\n\nexport const isLoadingSelector = createSelector(\n  [itemsStoreSelector],\n  ({ isLoading }): boolean => isLoading as boolean\n);\n","import * as actions from './actions';\nimport { actionTypes } from './action-types';\nimport * as selectors from './selectors';\nexport { reducer } from './reducer';\nexport { actions };\nexport { actionTypes };\n\nconst Items = {\n  actions,\n  actionTypes,\n  selectors,\n};\n\nexport { Items };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"comment_root__3SPDu\",\"voter\":\"comment_voter__2oV-e\",\"title\":\"comment_title__1c5Bm\",\"comment\":\"comment_comment__B8IGG\",\"valign\":\"comment_valign__3pMLr\"};","import { actionTypes } from './action-types';\nimport { Dispatch } from 'redux';\nimport { CRUDApi } from '../../utils/api';\nimport { isEmpty } from 'lodash';\nimport { IItem } from '../Items/types';\n\nexport const getAllById = (ids: number[] | null) => async (dispatch: Dispatch) => {\n  if (!ids) {\n    return dispatch({\n      type: actionTypes.GET_ALL,\n      payload: new Promise((resolve) => resolve({ data: [] })),\n    });\n  }\n\n  const itemPromises = ids.map((id: number) =>\n    CRUDApi.endpoints.item.getOne(id)\n  );\n\n  let kids = (await Promise.all(itemPromises)).map((payload) => payload.data);\n\n  await getAllKids(kids);\n  async function getAllKids(children: IItem[]) {\n    for (const kid of children) {\n      if (isEmpty(kid.kids)) {\n        continue;\n      }\n\n      const commentPromises = kid.kids.map((id: number) =>\n        CRUDApi.endpoints.item.getOne(id)\n      );\n      const newKids = (await Promise.all(commentPromises)).map(\n        (payload) => payload.data\n      );\n\n      kids = kids.concat(newKids);\n\n      if (newKids.every((child) => isEmpty(child.kids))) {\n        continue;\n      }\n      // cast to item array by using any\n      await getAllKids(newKids);\n    }\n  }\n\n  kids = kids.filter((child: IItem) => !child.deleted && !child.dead);\n\n  return dispatch({\n    type: actionTypes.GET_ALL,\n    payload: new Promise((resolve) => resolve({ data: kids })),\n  });\n};\n","import { createSelector } from 'reselect';\nimport { IState } from '../types';\nimport { IItem } from '../Items/types';\n\nconst commentsStoreSelector = (state: IState) => state.comments;\nconst commentsByIdSelector = (state: IState) => state.comments.commentsById;\n\nexport const commentsSelector = createSelector(\n  [commentsByIdSelector],\n  (commentsById) => {\n    const values = Object.values(commentsById);\n    return (values as any).flatMap((value: IItem) => value);\n  }\n);\n\nexport const isLoadingSelector = createSelector(\n  [commentsStoreSelector],\n  ({ isLoading }): boolean => isLoading as boolean\n);\n","import * as actions from './actions';\nimport { actionTypes } from './action-types';\nimport * as selectors from './selectors';\nexport { reducer } from './reducer';\nexport { actions };\nexport { actionTypes };\n\nconst Comments = {\n  actions,\n  actionTypes,\n  selectors,\n};\n\nexport { Comments };\n","import * as React from 'react';\nimport { Item } from '../Item';\nimport { IItem } from '../../redux/Items/types';\n\ninterface IProps {\n  item: IItem;\n  onGoTo: (e: React.MouseEvent<HTMLInputElement>) => void;\n}\n\nconst CommentWriter: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { item, onGoTo } = props;\n  return (\n    <table>\n      <tbody>\n      <Item item={item} setCurrentItem={() => null} />\n      <tr>\n        <td colSpan={2} />\n        <td>\n          <textarea name=\"text\" rows={6} cols={60} />\n          <br />\n          <br />\n          <input\n            onClick={onGoTo}\n            type={'submit'}\n            value={'add comment'}\n          />\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  );\n};\n\nexport { CommentWriter };\n","import * as React from 'react';\nimport { IItem } from '../../redux/Items/types';\nimport styles from './comment.module.scss';\nimport { Link } from 'react-router-dom';\nimport { format } from 'timeago.js';\n\ninterface IProps {\n  comment: IItem;\n  item: IItem;\n}\n\nconst Comment: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { comment, item } = props;\n  return (\n    <table className={styles.root}>\n      <tbody>\n        <tr>\n          <td>\n            <img height={1} width={0} />\n          </td>\n          <td className={styles.valign}>\n            <a href={`https://news.ycombinator.com/vote?id=${item.id}&how=up`}>\n              <div className={styles.voter} />\n            </a>\n          </td>\n          <td>\n            <div className={styles.title}>\n              <a href={`https://news.ycombinator.com/user?id=${comment.by}`}>\n                {comment.by}\n              </a>{' '}\n              <span>\n                <a href={`https://news.ycombinator.com/item?id=${comment.id}`}>\n                  {format(comment.time, new Date().toString())}\n                </a>\n              </span>{' '}\n              <a href=\"javascript:void(0)\">[-]</a>\n            </div>\n            <br />\n            <div className={styles.comment}>\n              <span\n                dangerouslySetInnerHTML={{ __html: comment.text as string }}\n              />\n              <div>\n                <p>\n                  <u>\n                    <a\n                      href={`https://news.ycombinator.com/reply?id=${item.id}`}\n                    >\n                      reply\n                    </a>\n                  </u>\n                </p>\n              </div>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n};\n\nexport { Comment };\n","import * as React from 'react';\nimport { IItem } from '../../redux/Items/types';\nimport { Comment } from '../Comment';\n\ninterface IProps {\n  comments: IItem[];\n  item: IItem;\n}\n\nconst CommentList: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { comments, item } = props;\n  return (\n    <table>\n      <tbody>\n        {comments.map((comment) => {\n          return (\n            <tr key={comment.id}>\n              <td>\n                <Comment comment={comment} item={item} />\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n};\n\nexport { CommentList };\n","import * as React from 'react';\nimport { connect } from 'react-redux';\nimport { IState } from '../../redux/types';\nimport { Items } from '../../redux/Items';\nimport { Comments } from '../../redux/Comments';\nimport { IItem } from '../../redux/Items/types';\nimport { Dispatch } from 'redux';\nimport { SiteWrapper } from '../../layout/SiteWrapper';\nimport { isEmpty } from 'lodash';\nimport { CommentWriter } from '../../components/CommentWriter';\nimport { CommentList } from '../../components/CommentList';\nimport { ICommentsById } from '../../redux/Comments/types';\n\ninterface IStateProps {\n  item: IItem;\n  isLoading: boolean;\n  comments: IItem[];\n}\n\nconst mapStateToProps = (state: IState): IStateProps => {\n  return {\n    item: Items.selectors.currentItemSelector(state),\n    isLoading: Items.selectors.isLoadingSelector(state),\n    comments: Comments.selectors.commentsSelector(state),\n  };\n};\n\ninterface IDispatch {\n  dispatch: Dispatch;\n}\n\ntype IProps = IStateProps & IDispatch;\n\nconst handleGoTo: React.MouseEventHandler<HTMLInputElement> = (e): void => {\n  e.preventDefault();\n  e.stopPropagation();\n  window.location.href = 'https://news.ycombinator.com/comment';\n};\n\nconst CommentsPage: React.FunctionComponent<IProps> = (props: IProps) => {\n  const { item, dispatch, isLoading, comments } = props;\n\n  React.useEffect(() => {\n    const currentUrl = new URL(window.location.href);\n    const searchParams = new URLSearchParams(currentUrl.search);\n    const currentItem = searchParams.get('id');\n\n    if (!currentItem) {\n      return;\n    }\n\n    dispatch(Items.actions.setCurrentItem(Number(currentItem)) as any);\n\n    return () => dispatch(Items.actions.setCurrentItem(null) as any);\n  }, []);\n\n  React.useEffect(\n    () => {\n      if (isEmpty(item)) {\n        return;\n      }\n\n      dispatch(Comments.actions.getAllById(item.kids) as any);\n      return () => dispatch(Comments.actions.getAllById(null) as any);\n    },\n    [item]\n  );\n\n  return (\n    <SiteWrapper>\n      {isLoading || isEmpty(item) ? (\n        <div>Loading...</div>\n      ) : (\n        <>\n          <CommentWriter item={item} onGoTo={handleGoTo} />\n          <br />\n          <br />\n          {isLoading || isEmpty(comments) ? (\n            <div>Loading...</div>\n          ) : (\n            <CommentList comments={comments} item={item} />\n          )}\n          <br />\n          <br />\n        </>\n      )}\n    </SiteWrapper>\n  );\n};\n\nconst enhancedCommentsPage = connect(mapStateToProps)(CommentsPage);\n\nexport { enhancedCommentsPage as CommentsPage };\n","export { CommentsPage } from './comments-page';\n"],"sourceRoot":""}